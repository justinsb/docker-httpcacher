# Proxy configuration

http_port 3128

visible_hostname http-proxy

# Use the squid-deb-proxy ACL
acl allowed_networks src "/etc/squid-deb-proxy/autogenerated/allowed-networks-src.acl"

# Allow for caching of big objects
maximum_object_size 256 MB

# Don't bother caching small objects
minimum_object_size 128 KB

# Use the same setting as squid-deb-proxy: 40G
cache_dir aufs /var/cache/squid-deb-proxy 40000 16 256

# Use the same log locations as squid-deb-proxy
cache_access_log /var/log/squid-deb-proxy/access.log
cache_log /var/log/squid-deb-proxy/cache.log
cache_store_log /var/log/squid-deb-proxy/store.log

# Use same pid location as squid-deb-proxy
pid_filename /var/run/squid-deb-proxy.pid

# Like squid, we only allow ports 80 & 443 (unlike squid-deb-proxy, we block 563)
acl Safe_ports port 80
acl Safe_ports port 443
http_access deny !Safe_ports

cache allow all

# Only allow access based on the allowed_networks ACL from squid-deb-proxy
http_access allow allowed_networks
http_access deny all
